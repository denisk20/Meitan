<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:denis="http://meitan-kh.com/"
				xmlns:sf="http://www.springframework.org/tags/faces"
				xmlns:sec="http://www.springframework.org/security/facelets/tags"
				xmlns:c="http://java.sun.com/jstl/core"
				template="/WEB-INF/templates/meitan.xhtml">

	<ui:define name="content">
		<div class="h1div">
			<h1><h:outputText value="#{resourceBundle.goodsListForCategoryHeader}"/></h1>
		</div>

		<h:form>
			<sec:ifAllGranted roles="ROLE_ADMIN">
                <h:commandLink action="addGood" styleClass="imagedLink">
                    <h:graphicImage url="/images/okIcon.png"/>
                    <h:outputText value="#{resourceBundle.goodsListForCategoryAddProduct}"/>
                </h:commandLink>
				<!--<h:commandButton value="#{resourceBundle.goodsListForCategoryAddProduct}" action="addGood"/>-->
			</sec:ifAllGranted>
			<c:forEach items="#{products}" var="product">
				<div class="detailedItem">
					<denis:image imageName="#{product.name}" price="#{product.price.amount}" imageUrl="#{product.avatar.url}"
								 action="#{utils.getMethodExpression('select')}" id="#{product.id}"
								 type="#{product.class.simpleName}"/>
					<sec:ifAllGranted roles="ROLE_ADMIN">
						<denis:actionMenu entity="#{product}"/>
					</sec:ifAllGranted>
					<denis:goodMenu entity="#{product}"/>
				</div>
			</c:forEach>
		</h:form>
	</ui:define>
</ui:composition>