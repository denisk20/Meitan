<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
				xmlns:c="http://java.sun.com/jstl/core"
				template="../../templates/meitan-subflow.xhtml">

<ui:define name="content">

<h1>Login Required</h1>
<p>Please login or <a href="/spring/register">register</a> </p>
<div class="section">
	<c:if test="${not empty param.login_error}">
		<div class="errors">
			Your login attempt was not successful, try again.<br />
			Reason: #{sessionScope.SPRING_SECURITY_LAST_EXCEPTION.message}
		</div>
	</c:if>
	<br/>
	<p>Valid username/passwords are:</p>
	<ul>
	    <li>mama/123</li>
	</ul>
</div>

<div class="section">
	<h:form >
		<fieldset>
			<div class="field">
				<div class="label">User:</div>
				<div class="output">
					<c:if test="${not empty param.login_error}">
						<c:set var="username" value="${sessionScope.SPRING_SECURITY_LAST_USERNAME}"/>
					</c:if>
					<h:inputText id="j_username" value="#{username}"/>
				</div>
			</div>
			<div class="field">
				<div class="label">Password:</div>
				<div class="output">
					<h:inputText id="j_password" />
				</div>
			</div>
		</fieldset>
		<div class="buttonGroup">
			<h:commandLink value="Login" action="login" />
		</div>
	</h:form>
</div>

</ui:define>
</ui:composition>