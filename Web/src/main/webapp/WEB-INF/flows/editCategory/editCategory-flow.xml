<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
      >

    <persistence-context />

    <input name="categoryId" required="true" />

    <on-start>
        <evaluate expression="categoryDao.findById(categoryId)" result="flowScope.category" />
    </on-start>


    <view-state id="edit" model="category">
        <on-entry>
            <set name="flashScope.category" value="category"/>
        </on-entry>
        <transition on="save" to="save">
            <evaluate expression="categoryDao.makePersistent(category)"/>
        </transition>
    </view-state>

    <end-state id="save" commit="true"/>
</flow>