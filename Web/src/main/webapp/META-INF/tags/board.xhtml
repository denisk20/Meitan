<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:sec="http://www.springframework.org/security/facelets/tags"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:sf="http://www.springframework.org/tags/faces" xmlns:f="http://java.sun.com/jsf/core"
        xmlns:rich="http://richfaces.org/rich"
        >

        <script type="text/javascript" src="/js/jquery-1.4.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".flip").click(function() {
                    $(".editPanel").slideToggle("slow");
                });
            });
        </script>

            <sec:ifAllGranted roles="ROLE_ADMIN">
            <div class="flip">Добавить новую новость...</div>

            <div class="editPanel" style="display:none;">
                <h:form>

                    <rich:editor value="#{newNews.content}" theme="advanced"/>
                    <!--<h:inputText value="#{newNews.content}"/>-->
                    <br/>
                    <h:commandButton value="Создать" action="create"/>
                </h:form>
            </div>
        </sec:ifAllGranted>

        <h:dataTable value="#{boardItems}" var="item">
            <h:column>
                <f:facet name="header">Объявление</f:facet>
                <sec:ifNotGranted roles="ROLE_ADMIN">
                    <p style="max-width:100px"><h:outputText escape="false" value="#{item.content}"/> </p>
                </sec:ifNotGranted>

                <sec:ifAllGranted roles="ROLE_ADMIN">
                    <rich:editor value="#{item.content}" theme="advanced"/>
                    <br/>

                    <h:commandButton value="Сохранить" action="saveItem"/>
                    <h:commandButton value="Удалить" action="delete"/>
                </sec:ifAllGranted>

            </h:column>

        </h:dataTable>
    
</ui:component>